webpackJsonp([16],{xU9k:function(t,a){},xeEE:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("BO1k"),r=e.n(n),o=e("Dd8w"),i=e.n(o),s=e("tjiI"),l=e("JpjP"),c=e("NYxO"),d=e("PJh5"),u=e.n(d);u.a.locale("zh-cn");var p={name:"Production",components:{HeadInfo:s.default,RangeDate:l.a},data:function(){return{advanced:!1,queryParams:{},filteredInfo:null,dataSource:[],loading:!1,pagination:{pageSizeOptions:["10","20","30","40","100"],defaultCurrent:1,defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(t,a){return"显示 "+a[0]+" ~ "+a[1]+" 条记录，共 "+t+" 条记录"}},series1:[44,55],chartOptions1:{dataLabels:{enabled:!1},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{show:!0}}}],legend:{position:"right",offsetY:0,height:230},labels:["合格数","不合格数"]},series:[],chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"35%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:[]},fill:{opacity:1}},todayIp:"",todayVisitCount:"",totalVisitCount:""}},activated:function(){this.fetch()},computed:i()({},Object(c.c)({multipage:function(t){return t.setting.multipage},user:function(t){return t.account.user}}),{columns:function(){var t=this.sortedInfo,a=this.filteredInfo;return t=t||{},a=a||{},[{title:"工单名称",dataIndex:"formularName",sorter:!0,sortOrder:"formularName"===t.columnKey&&t.order},{title:"操作人",dataIndex:"author",sorter:!0,sortOrder:"author"===t.columnKey&&t.order},{title:"批次",dataIndex:"batchNo",sorter:!0,sortOrder:"batchNo"===t.columnKey&&t.order},{title:"状态",dataIndex:"remark",sorter:!0,sortOrder:"remark"===t.columnKey&&t.order},{title:"完成时间",dataIndex:"createDate",sorter:!0,ortOrder:"createDate"===t.columnKey&&t.order}]}}),methods:{reset:function(){},fetch:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,a.pageSize=this.paginationInfo.pageSize,a.pageNum=this.paginationInfo.current):(a.pageSize=this.pagination.defaultPageSize,a.pageNum=this.pagination.defaultCurrent),this.$get("productionData",i()({},a)).then(function(a){var e=a.data,n=i()({},t.pagination);n.total=e.listData.length,t.dataSource=e.listData,t.pagination=n,t.loading=!1})},handleTableChange:function(t,a,e){this.paginationInfo=t,this.filteredInfo=a,this.sortedInfo=e,this.fetch(i()({sortField:e.field,sortOrder:e.order},this.queryParams,a))},handleDateChange:function(t){t&&(this.queryParams.createTimeFrom=t[0],this.queryParams.createTimeTo=t[1])}},mounted:function(){var t=this;this.fetch(),this.$get("index/"+this.user.username).then(function(a){var e=a.data.data;t.todayIp=e.todayIp,t.todayVisitCount=e.todayVisitCount,t.totalVisitCount=e.totalVisitCount;for(var n=[],o=[],i=6;i>=0;i--){var s=u()().subtract(i,"days").format("MM-DD"),l=!1,c=!0,d=!1,p=void 0;try{for(var f,h=r()(e.lastSevenVisitCount);!(c=(f=h.next()).done);c=!0){var g=f.value;g.days===s&&(l=!0,n.push(g.count))}}catch(t){d=!0,p=t}finally{try{!c&&h.return&&h.return()}finally{if(d)throw p}}l||n.push(0),o.push(s)}for(var m=[],v=6;v>=0;v--){var y=u()().subtract(v,"days").format("MM-DD"),b=!1,C=!0,I=!1,x=void 0;try{for(var w,S=r()(e.lastSevenUserVisitCount);!(C=(w=S.next()).done);C=!0){var _=w.value;_.days===y&&(b=!0,m.push(_.count))}}catch(t){I=!0,x=t}finally{try{!C&&S.return&&S.return()}finally{if(I)throw x}}b||m.push(0)}t.$refs.count.updateSeries([{name:"您",data:m},{name:"总数",data:n}],!0),t.$refs.count.updateOptions({xaxis:{categories:o},title:{text:"工单生产图表",align:"left"}},!0,!0),t.$refs.pie.updateOptions({title:{text:"良品率",align:"left"}},!0,!0)}).catch(function(a){t.$message.error("获取首页信息失败")})}},f={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:[!0===t.multipage?"multi-page":"single-page","not-menu-page","home-page"]},[e("a-row",{staticClass:"head-info",attrs:{gutter:8}},[e("a-card",{staticClass:"head-info-card"},[e("a-col",{attrs:{span:12}},[e("span",{staticStyle:{"font-size":"30px","font-weight":"400"}},[t._v("生产查询")])]),t._v(" "),e("a-col",{attrs:{span:12}},[e("div",[e("a-row",{staticClass:"more-info"},[e("a-col",{attrs:{span:4}}),t._v(" "),e("a-col",{attrs:{span:4}}),t._v(" "),e("a-col",{attrs:{span:4}}),t._v(" "),e("a-col",{attrs:{span:4}},[e("head-info",{attrs:{title:"日产量",content:t.todayIp,center:!0,bordered:!0}})],1),t._v(" "),e("a-col",{attrs:{span:3}},[e("head-info",{attrs:{title:"消耗量",content:t.todayVisitCount,center:!0,bordered:!1}})],1),t._v(" "),e("a-col",{attrs:{span:3}},[e("head-info",{attrs:{title:"不良数",content:t.totalVisitCount,center:!0}})],1)],1)],1)])],1)],1),t._v(" "),e("a-row",{staticClass:"count-info",attrs:{gutter:8}},[e("a-col",{staticClass:"visit-count-wrapper",attrs:{span:10}},[e("a-card",{staticClass:"visit-count"},[e("apexchart",{ref:"count",attrs:{type:"bar",height:"350",options:t.chartOptions,series:t.series}})],1),t._v(" "),e("a-card",{staticClass:"visit-count"},[e("a-col",{attrs:{span:8,offset:6}},[e("apexchart",{ref:"pie",attrs:{type:"donut",width:"300",options:t.chartOptions1,series:t.series1}})],1)],1)],1),t._v(" "),e("a-col",{staticClass:"project-wrapper",attrs:{span:14}},[e("a-card",{staticClass:"project-card"},[e("a-form",{attrs:{layout:"horizontal"}},[e("div",{class:t.advanced?null:"fold"},[e("a-row",[e("a-col",{attrs:{md:16,sm:24,offset:8}},[e("a-form-item",{attrs:{label:"创建时间",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("range-date",{ref:"createTime",on:{change:t.handleDateChange}})],1)],1)],1)],1),t._v(" "),e("span",{staticStyle:{float:"right","margin-top":"3px"}},[e("a-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),e("a-table",{ref:"TableInfo",attrs:{columns:t.columns,dataSource:t.dataSource,pagination:t.pagination,size:t.small,loading:t.loading},on:{change:t.handleTableChange}})],1)],1)],1)],1)},staticRenderFns:[]},h=e("VU/8")(p,f,!1,function(t){e("xU9k")},null,null);a.default=h.exports}});