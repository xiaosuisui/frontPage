webpackJsonp([4,18,55,56],{"2hqG":function(a,e){},"9JhD":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("a-modal",{attrs:{centered:!0,keyboard:!1,footer:null,width:750,title:"原材料信息"},on:{cancel:a.handleCancleClick},model:{value:a.show,callback:function(e){a.show=e},expression:"show"}},[t("a-layout",{staticClass:"rawmaterial-info"},[t("a-layout-sider",{staticClass:"rawmaterial-info-side"}),a._v(" "),t("a-layout-content",{staticClass:"rawmaterial-content-one"},[t("p",[t("a-icon",{attrs:{type:"user"}}),a._v("原材料名称："+a._s(a.rawmaterialInfoData.rawmaterialName))],1),a._v(" "),t("p",[t("a-icon",{attrs:{type:"skin"}}),a._v("原材料编号："+a._s(a.rawmaterialInfoData.rawmaterialNo))],1),a._v(" "),t("p",[t("a-icon",{attrs:{type:"skin"}}),a._v("创建人："+a._s(a.rawmaterialInfoData.userName))],1)]),a._v(" "),t("a-layout-content",{staticClass:"user-content-two"},[t("p",["1"===a.rawmaterialInfoData.status?t("a-icon",{attrs:{type:"smile"}}):t("a-icon",{attrs:{type:"frown"}}),a._v("状态：\n       "),"0"===a.rawmaterialInfoData.status?[t("a-tag",{attrs:{color:"red"}},[a._v("锁定")])]:"1"===a.rawmaterialInfoData.status?[t("a-tag",{attrs:{color:"cyan"}},[a._v("有效")])]:[a._v("\n         "+a._s(a.rawmaterialInfoData.status)+"\n       ")]],2),a._v(" "),t("p",[t("a-icon",{attrs:{type:"clock-circle"}}),a._v("创建时间："+a._s(a.rawmaterialInfoData.createDate))],1),a._v(" "),t("p",[t("a-icon",{attrs:{type:"login"}}),a._v("编辑时间："+a._s(a.rawmaterialInfoData.editDate))],1)])],1)],1)},staticRenderFns:[]},i=t("VU/8")({name:"RawmaterialInfo",props:{rawmaterialInfoVisiable:{require:!0,default:!1},rawmaterialInfoData:{require:!0}},computed:{show:{get:function(){return this.rawmaterialInfoVisiable},set:function(){}}},methods:{handleCancleClick:function(){this.$emit("close")}}},r,!1,function(a){t("FVLq")},"data-v-b41180fe",null);e.default=i.exports},FVLq:function(a,e){},G5xz:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("Dd8w"),i=t.n(r),s=t("NYxO"),o={labelCol:{span:3},wrapperCol:{span:18}},n={name:"RawmaterialAdd",props:{rawmaterialAddVisiable:{default:!1}},computed:i()({},Object(s.c)({user:function(a){return a.account.user}})),data:function(){return{rawmaterial:{rawmaterialName:""},loading:!1,formItemLayout:o,form:this.$form.createForm(this),validateStatus:"",help:""}},methods:{reset:function(){this.validateStatus="",this.help="",this.rawmaterial.rawmaterialName="",this.loading=!1,this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleSubmit:function(){var a=this;"success"!==this.validateStatus&&this.handleUserNameBlur(),this.form.validateFields(function(e,t){e||"success"!==a.validateStatus||(a.loading=!0,a.rawmaterial.userName=a.user.username,a.$post("rawmaterial",i()({},a.rawmaterial)).then(function(e){a.reset(),a.$emit("success")}).catch(function(){a.loading=!1}))})},handleRawmaterialBlur:function(){var a=this,e=this.rawmaterial.rawmaterialName.trim();e.length?e.length>20?(this.validateStatus="error",this.help="原材料名称不能超过10个字"):e.length<4?(this.validateStatus="error",this.help="用户名不能少于4个字符"):(this.validateStatus="validating",this.$get("rawmaterial/check/"+e).then(function(e){e.data?(a.validateStatus="success",a.help=""):(a.validateStatus="error",a.help="抱歉，该用户名已存在")})):(this.validateStatus="error",this.help="原材料名称不能为空")}}},l={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"新增原材料",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:a.rawmaterialAddVisiable},on:{close:a.onClose}},[t("a-form",{attrs:{form:a.form}},[t("a-form-item",a._b({attrs:{label:"名称",validateStatus:a.validateStatus,help:a.help}},"a-form-item",a.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rawmaterialName",{rules:[{required:!0,message:"原材料名称不能为空"}]}],expression:"['rawmaterialName',{rules: [{ required: true, message: '原材料名称不能为空'}]}]"}],on:{blur:a.handleRawmaterialBlur},model:{value:a.rawmaterial.rawmaterialName,callback:function(e){a.$set(a.rawmaterial,"rawmaterialName",e)},expression:"rawmaterial.rawmaterialName"}})],1),a._v(" "),t("a-form-item",a._b({attrs:{label:"编号",validateStatus:a.validateStatus,help:a.help}},"a-form-item",a.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rawmaterialNo",{rules:[{required:!0,message:"原材料编号不能为空"}]}],expression:"['rawmaterialNo',{rules: [{ required: true, message: '原材料编号不能为空'}]}]"}],on:{blur:a.handleRawmaterialBlur},model:{value:a.rawmaterial.rawmaterialNo,callback:function(e){a.$set(a.rawmaterial,"rawmaterialNo",e)},expression:"rawmaterial.rawmaterialNo"}})],1),a._v(" "),t("a-form-item",a._b({attrs:{label:"状态"}},"a-form-item",a.formItemLayout,!1),[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请选择状态"}]}],expression:"['status',{rules: [{ required: true, message: '请选择状态'}]}]"}],model:{value:a.rawmaterial.status,callback:function(e){a.$set(a.rawmaterial,"status",e)},expression:"rawmaterial.status"}},[t("a-radio",{attrs:{value:"0"}},[a._v("锁定")]),a._v(" "),t("a-radio",{attrs:{value:"1"}},[a._v("有效")])],1)],1)],1),a._v(" "),t("div",{staticClass:"drawer-bootom-button"},[t("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:a.onClose}},[t("a-button",{staticStyle:{"margin-right":".8rem"}},[a._v("取消")])],1),a._v(" "),t("a-button",{attrs:{type:"primary",loading:a.loading},on:{click:a.handleSubmit}},[a._v("提交")])],1)],1)},staticRenderFns:[]},m=t("VU/8")(n,l,!1,null,null,null);e.default=m.exports},diZD:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("Dd8w"),i=t.n(r),s=t("BO1k"),o=t.n(s),n=t("9JhD"),l=t("G5xz"),m=t("yhiS"),d={name:"Rawmaterial",components:{RawmaterialInfo:n.default,RawmaterialAdd:l.default,RawmaterialEdit:m.default},data:function(){return{rawmaterialInfo:{visiable:!1,data:{}},rawmaterialAdd:{visiable:!1},rawmaterialEdit:{visiable:!1},queryParams:{},advanced:!1,filteredInfo:null,sortedInfo:null,paginationInfo:null,dataSource:[],selectedRowKeys:[],loading:!1,pagination:{pageSizeOptions:["10","12","15"],defaultCurrent:1,defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(a,e){return"显示 "+e[0]+" ~ "+e[1]+" 条记录，共 "+a+" 条记录"}}}},computed:{columns:function(){var a=this.$createElement,e=this.sortedInfo,t=this.filteredInfo;return e=e||{},t=t||{},[{title:"原材料名称",dataIndex:"rawmaterialName",sorter:!0,sortOrder:"rawmaterialName"===e.columnKey&&e.order},{title:"原材料编号",dataIndex:"rawmaterialNo",sorter:!0,sortOrder:"rawmaterialNo"===e.columnKey&&e.order},{title:"状态",dataIndex:"status",customRender:function(e,t,r){switch(e){case"0":return a("a-tag",{attrs:{color:"red"}},["锁定"]);case"1":return a("a-tag",{attrs:{color:"cyan"}},["有效"]);default:return e}},filters:[{text:"有效",value:"1"},{text:"锁定",value:"0"}],filterMultiple:!1,filteredValue:t.status||null,onFilter:function(a,e){return e.status.includes(a)}},{title:"创建人",dataIndex:"userName",sorter:!0,sortOrder:"userName"===e.columnKey&&e.order},{title:"创建时间",dataIndex:"createDate",sorter:!0,sortOrder:"createDate"===e.columnKey&&e.order},{title:"编辑时间",dataIndex:"editDate",sorter:!0,ortOrder:"createDate"===e.columnKey&&e.order},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}]}},mounted:function(){this.fetch()},methods:{onSelectChange:function(a){this.selectedRowKeys=a},reset:function(){this.selectedRowKeys=[],this.$refs.TableInfo.pagination.current=this.pagination.defaultCurrent,this.paginationInfo&&(this.paginationInfo.current=this.pagination.defaultCurrent,this.paginationInfo.pageSize=this.pagination.defaultPageSize),this.filteredInfo=null,this.sortedInfo=null,this.queryParams={},this.fetch()},batchDelete:function(){if(this.selectedRowKeys.length){var a=this;this.$confirm({title:"确定删除所选中的记录?",content:"当您点击确定按钮后，这些记录将会被彻底删除",centered:!0,onOk:function(){var e=[],t=!0,r=!1,i=void 0;try{for(var s,n=o()(a.selectedRowKeys);!(t=(s=n.next()).done);t=!0){var l=s.value;e.push(l)}}catch(a){r=!0,i=a}finally{try{!t&&n.return&&n.return()}finally{if(r)throw i}}a.$delete("rawmaterial/"+e.join(",")).then(function(){a.$message.success("删除成功"),a.selectedRowKeys=[],a.search()})},onCancel:function(){a.selectedRowKeys=[]}})}else this.$message.warning("请选择需要删除的记录")},handleTableChange:function(a,e,t){this.paginationInfo=a,this.filteredInfo=e,this.sortedInfo=t,this.rawmaterialInfo.visiable=!1,this.fetch(i()({sortField:t.field,sortOrder:t.order},this.queryParams,e))},edit:function(a){this.$refs.rawmaterialEdit.setFormValues(a),this.rawmaterialEdit.visiable=!0},handleRawmaterialEditClose:function(){this.rawmaterialEdit.visiable=!1},handleRawmaterialEditSuccess:function(){this.rawmaterialEdit.visiable=!1,this.$message.success("修改原材料成功"),this.search()},handleRawmaterialInfoClose:function(){this.rawmaterialInfo.visiable=!1},search:function(){var a=this.sortedInfo,e=this.filteredInfo,t=void 0,r=void 0;a&&(t=a.field,r=a.order),this.fetch(i()({sortField:t,sortOrder:r},this.queryParams,e))},view:function(a){this.rawmaterialInfo.data=a,this.rawmaterialInfo.visiable=!0},handleRawmaterialAddClose:function(){this.rawmaterialAdd.visiable=!1},handleRawmaterialAddSuccess:function(){this.rawmaterialAdd.visiable=!1,this.$message.success("新增原材料成功"),this.search()},fetch:function(){var a=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,e.pageSize=this.paginationInfo.pageSize,e.pageNum=this.paginationInfo.current):(e.pageSize=this.pagination.defaultPageSize,e.pageNum=this.pagination.defaultCurrent),this.$get("rawmaterial",i()({},e)).then(function(e){var t=e.data,r=i()({},a.pagination);r.total=t.total,a.dataSource=t.rows,a.pagination=r,a.loading=!1})},add:function(){this.rawmaterialAdd.visiable=!0}}},u={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[t("div",{class:a.advanced?"search":null},[t("a-form",{attrs:{layout:"horizontal"}},[t("a-row",[t("div",{class:a.advanced?null:"fold"},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"名称",labelCol:{span:4},wrapperCol:{span:18,offset:2}}},[t("a-input",{model:{value:a.queryParams.rawmaterialName,callback:function(e){a.$set(a.queryParams,"rawmaterialName",e)},expression:"queryParams.rawmaterialName"}})],1)],1),a._v(" "),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"编号",labelCol:{span:4},wrapperCol:{span:18,offset:2}}},[t("a-input",{model:{value:a.queryParams.rawmaterialNo,callback:function(e){a.$set(a.queryParams,"rawmaterialNo",e)},expression:"queryParams.rawmaterialNo"}})],1)],1)],1),a._v(" "),t("span",{staticStyle:{float:"right","margin-top":"3px"}},[t("a-button",{attrs:{type:"primary"},on:{click:a.search}},[a._v("查询")]),a._v(" "),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:a.reset}},[a._v("重置")])],1)])],1)],1),a._v(" "),t("div",[t("div",{staticClass:"operator"},[t("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"rawmaterial:add",expression:"'rawmaterial:add'"}],attrs:{type:"primary"},on:{click:a.add}},[a._v("新增")]),a._v(" "),t("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"rawmaterial:delete",expression:"'rawmaterial:delete'"}],attrs:{type:"primary"},on:{click:a.batchDelete}},[a._v("删除")])],1),a._v(" "),t("a-table",{ref:"TableInfo",attrs:{columns:a.columns,dataSource:a.dataSource,pagination:a.pagination,loading:a.loading,rowSelection:{selectedRowKeys:a.selectedRowKeys,onChange:a.onSelectChange},scroll:{x:900}},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"email",fn:function(e,r){return[t("a-popover",{attrs:{placement:"topLeft"}},[t("template",{slot:"content"},[t("div",[a._v(a._s(e))])]),a._v(" "),t("p",{staticStyle:{width:"150px","margin-bottom":"0"}},[a._v(a._s(e))])],2)]}},{key:"operation",fn:function(e,r){return[t("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"rawmaterial:update",expression:"'rawmaterial:update'"}],attrs:{type:"setting",theme:"twoTone",twoToneColor:"#4a9ff5",title:"修改原材料"},on:{click:function(e){a.edit(r)}}}),a._v("\n           \n          "),t("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"rawmaterial:view",expression:"'rawmaterial:view'"}],attrs:{type:"eye",theme:"twoTone",twoToneColor:"#42b983",title:"查看"},on:{click:function(e){a.view(r)}}}),a._v(" "),t("a-badge",{directives:[{name:"hasNoPermission",rawName:"v-hasNoPermission",value:"rawmaterial:view",expression:"'rawmaterial:update','rawmaterial:view'"}],attrs:{status:"warning",text:"无权限"}})]}}])})],1),a._v(" "),t("rawmaterial-info",{attrs:{rawmaterialInfoData:a.rawmaterialInfo.data,rawmaterialInfoVisiable:a.rawmaterialInfo.visiable},on:{close:a.handleRawmaterialInfoClose}}),a._v(" "),t("rawmaterial-add",{attrs:{rawmaterialAddVisiable:a.rawmaterialAdd.visiable},on:{close:a.handleRawmaterialAddClose,success:a.handleRawmaterialAddSuccess}}),a._v(" "),t("rawmaterial-edit",{ref:"rawmaterialEdit",attrs:{rawmaterialEditVisiable:a.rawmaterialEdit.visiable},on:{close:a.handleRawmaterialEditClose,success:a.handleRawmaterialEditSuccess}})],1)},staticRenderFns:[]},c=t("VU/8")(d,u,!1,function(a){t("2hqG")},"data-v-423b9796",null);e.default=c.exports},yhiS:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("Dd8w"),i=t.n(r),s=t("fZjL"),o=t.n(s),n=t("+6Bu"),l=t.n(n),m={labelCol:{span:3},wrapperCol:{span:18}},d={name:"RawmaterialEdit",props:{rawmaterialEditVisiable:{default:!1}},data:function(){return{formItemLayout:m,form:this.$form.createForm(this),rawmaterialId:"",loading:!1}},methods:{onClose:function(){this.loading=!1,this.form.resetFields(),this.$emit("close")},setFormValues:function(a){var e=this,t=l()(a,[]);this.rawmaterialId=t.rawmaterialId;var r=["rawmaterialName","rawmaterialNo","status"];o()(t).forEach(function(a){if(-1!==r.indexOf(a)){e.form.getFieldDecorator(a);var i={};i[a]=t[a],e.form.setFieldsValue(i)}})},handleSubmit:function(){var a=this;this.form.validateFields(function(e,t){if(!e){a.loading=!0;var r=a.form.getFieldsValue();r.rawmaterialId=a.rawmaterialId,a.$put("rawmaterial",i()({},r)).then(function(e){a.loading=!1,a.$emit("success")}).catch(function(){a.loading=!1})}})}}},u={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"修改原材料",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:a.rawmaterialEditVisiable},on:{close:a.onClose}},[t("a-form",{attrs:{form:a.form}},[t("a-form-item",a._b({attrs:{label:"原材料名称"}},"a-form-item",a.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rawmaterialName"],expression:"['rawmaterialName']"}]})],1),a._v(" "),t("a-form-item",a._b({attrs:{label:"原材料编号"}},"a-form-item",a.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rawmaterialNo"],expression:"['rawmaterialNo']"}]})],1),a._v(" "),t("a-form-item",a._b({attrs:{label:"状态"}},"a-form-item",a.formItemLayout,!1),[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请选择状态"}]}],expression:"[\n          'status',\n          {rules: [{ required: true, message: '请选择状态' }]}\n        ]"}]},[t("a-radio",{attrs:{value:"0"}},[a._v("锁定")]),a._v(" "),t("a-radio",{attrs:{value:"1"}},[a._v("有效")])],1)],1)],1),a._v(" "),t("div",{staticClass:"drawer-bootom-button"},[t("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:a.onClose}},[t("a-button",{staticStyle:{"margin-right":".8rem"}},[a._v("取消")])],1),a._v(" "),t("a-button",{attrs:{type:"primary",loading:a.loading},on:{click:a.handleSubmit}},[a._v("提交")])],1)],1)},staticRenderFns:[]},c=t("VU/8")(d,u,!1,null,null,null);e.default=c.exports}});