webpackJsonp([7,26,58],{"4wF+":function(e,a){},"5oA4":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Dd8w"),i=t.n(r),o=t("xiDn"),n=t("G/h5"),s={name:"WarehouseDetail",components:{WarehousedetailInfo:o.default,WarehousedetailEdit:n.default},data:function(){return{warehouseDetailInfo:{visiable:!1,data:{}},warehousedetailEdit:{visiable:!1},queryParams:{},advanced:!1,filteredInfo:null,sortedInfo:null,paginationInfo:null,dataSource:[],selectedRowKeys:[],loading:!1,pagination:{pageSizeOptions:["10","12","15"],defaultCurrent:1,defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e,a){return"显示 "+a[0]+" ~ "+a[1]+" 条记录，共 "+e+" 条记录"}}}},computed:{columns:function(){var e=this.$createElement,a=this.sortedInfo,t=this.filteredInfo;return a=a||{},t=t||{},[{title:"料仓编号",dataIndex:"warehouseDetailName",sorter:!0,sortOrder:"warehouseDetailName"===a.columnKey&&a.order},{title:"原材料名称",dataIndex:"rawmaterialName",sorter:!0,sortOrder:"rawmaterialName"===a.columnKey&&a.order},{title:"原材料编号",dataIndex:"rawmaterialNo",sorter:!0,sortOrder:"rawmaterialNo"===a.columnKey&&a.order},{title:"状态",dataIndex:"status",customRender:function(a,t,r){switch(a){case"0":return e("a-tag",{attrs:{color:"red"}},["关闭"]);case"1":return e("a-tag",{attrs:{color:"cyan"}},["开启"]);default:return a}},filters:[{text:"开启",value:"1"},{text:"锁定",value:"0"}],filterMultiple:!1,filteredValue:t.status||null,onFilter:function(e,a){return a.status.includes(e)}},{title:"物料重量",dataIndex:"rawmaterialWeight",sorter:!0,sortOrder:"rawmaterialWeight"===a.columnKey&&a.order},{title:"总重量",dataIndex:"currentWeight",sorter:!0,sortOrder:"currentWeight"===a.columnKey&&a.order},{title:"预警值",dataIndex:"warnWeight",sorter:!0,sortOrder:"warnWeight"===a.columnKey&&a.order},{title:"数量",dataIndex:"quantity",sorter:!0,sortOrder:"quantity"===a.columnKey&&a.order},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}]}},activated:function(){this.fetch()},methods:{onSelectChange:function(e){this.selectedRowKeys=e},reset:function(){this.selectedRowKeys=[],this.$refs.TableInfo.pagination.current=this.pagination.defaultCurrent,this.paginationInfo&&(this.paginationInfo.current=this.pagination.defaultCurrent,this.paginationInfo.pageSize=this.pagination.defaultPageSize),this.filteredInfo=null,this.sortedInfo=null,this.queryParams={},this.fetch()},handleTableChange:function(e,a,t){this.paginationInfo=e,this.filteredInfo=a,this.sortedInfo=t,this.warehouseDetailInfo.visiable=!1,this.fetch(i()({sortField:t.field,sortOrder:t.order},this.queryParams,a))},edit:function(e){this.$refs.warehousedetailEdit.setFormValues(e),this.warehousedetailEdit.visiable=!0},handlerClose:function(){this.warehousedetailEdit.visiable=!1},handlerSuccess:function(){this.warehousedetailEdit.visiable=!1,this.$message.success("修改料仓成功"),this.search()},handleWarehouseDetailInfoClose:function(){this.warehouseDetailInfo.visiable=!1},search:function(){var e=this.sortedInfo,a=this.filteredInfo,t=void 0,r=void 0;e&&(t=e.field,r=e.order),this.fetch(i()({sortField:t,sortOrder:r},this.queryParams,a))},view:function(e){this.warehouseDetailInfo.data=e,this.warehouseDetailInfo.visiable=!0},fetch:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,a.pageSize=this.paginationInfo.pageSize,a.pageNum=this.paginationInfo.current):(a.pageSize=this.pagination.defaultPageSize,a.pageNum=this.pagination.defaultCurrent),this.$get("warehousedetail",i()({},a)).then(function(a){var t=a.data,r=i()({},e.pagination);r.total=t.total,e.dataSource=t.rows,e.pagination=r,e.loading=!1})}}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[t("div",{class:e.advanced?"search":null},[t("a-form",{attrs:{layout:"horizontal"}},[t("a-row",[t("div",{class:e.advanced?null:"fold"},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"料仓编号",labelCol:{span:4},wrapperCol:{span:18,offset:2}}},[t("a-input",{model:{value:e.queryParams.warehouseDetailName,callback:function(a){e.$set(e.queryParams,"warehouseDetailName",a)},expression:"queryParams.warehouseDetailName"}})],1)],1),e._v(" "),t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"名称",labelCol:{span:4},wrapperCol:{span:18,offset:2}}},[t("a-input",{model:{value:e.queryParams.rawmaterialName,callback:function(a){e.$set(e.queryParams,"rawmaterialName",a)},expression:"queryParams.rawmaterialName"}})],1)],1)],1),e._v(" "),t("span",{staticStyle:{float:"right","margin-top":"3px"}},[t("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")])],1)])],1)],1),e._v(" "),t("div",[t("div",{staticClass:"operator"}),e._v(" "),t("a-table",{ref:"TableInfo",attrs:{columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},scroll:{x:900}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(a,r){return[t("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"warehousedetail:update",expression:"'warehousedetail:update'"}],attrs:{type:"setting",theme:"twoTone",twoToneColor:"#4a9ff5",title:"修改原材料"},on:{click:function(a){e.edit(r)}}}),e._v("\n           \n          "),t("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"warehousedetail:view",expression:"'warehousedetail:view'"}],attrs:{type:"eye",theme:"twoTone",twoToneColor:"#42b983",title:"查看"},on:{click:function(a){e.view(r)}}}),e._v(" "),t("a-badge",{directives:[{name:"hasNoPermission",rawName:"v-hasNoPermission",value:"warehousedetail:view",expression:"'warehousedetail:update','warehousedetail:view'"}],attrs:{status:"warning",text:"无权限"}})]}}])})],1),e._v(" "),t("warehousedetail-info",{attrs:{warehouseDetailInfoData:e.warehouseDetailInfo.data,warehouseDetailInfoVisiable:e.warehouseDetailInfo.visiable},on:{close:e.handleWarehouseDetailInfoClose}}),e._v(" "),t("warehousedetail-edit",{ref:"warehousedetailEdit",attrs:{warehouseDetailEditVisiable:e.warehousedetailEdit.visiable},on:{close:e.handlerClose,success:e.handlerSuccess}})],1)},staticRenderFns:[]},u=t("VU/8")(s,l,!1,function(e){t("T80H")},"data-v-4a63a72a",null);a.default=u.exports},"G/h5":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("fZjL"),i=t.n(r),o=t("+6Bu"),n=t.n(o),s=t("Dd8w"),l=t.n(s),u={labelCol:{span:3},wrapperCol:{span:18}},d={name:"WarehousedetailEdit",components:{RowSelect:t("aCQA").default},props:{warehouseDetailEditVisiable:{default:!1}},data:function(){return{formItemLayout:u,form:this.$form.createForm(this),warehouseDetailId:"",selectedId:"",loading:!1}},methods:{sendSelectedId:function(e){var a=this;if("0000"!=e){var t={id:e};this.$get("rawmaterial/getRawmaterial",l()({},t)).then(function(e){var t=e.data,r={rawmaterialName:t.rawmaterialName,rawmaterialNo:t.rawmaterialNo};a.form.setFieldsValue(r)})}else{this.form.setFieldsValue({rawmaterialName:"",rawmaterialNo:""})}},onClose:function(){this.loading=!1,this.form.resetFields(),this.$emit("close")},setFormValues:function(e){var a=this,t=n()(e,[]);this.warehouseDetailId=t.warehouseDetailId;var r=["warehouseDetailName","rawmaterialName","rawmaterialNo","currentWeight","warnWeight","quantity"];i()(t).forEach(function(e){if(-1!==r.indexOf(e)){a.form.getFieldDecorator(e);var i={};i[e]=t[e],a.form.setFieldsValue(i)}})},handleSubmit:function(){var e=this;this.form.validateFields(function(a,t){if(!a){e.loading=!0;var r=e.form.getFieldsValue();r.warehouseDetailId=e.warehouseDetailId,e.$put("warehousedetail",l()({},r)).then(function(a){e.loading=!1,e.$emit("success")}).catch(function(){e.loading=!1})}})}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"修改详信息",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:e.warehouseDetailEditVisiable},on:{close:e.onClose}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",e._b({attrs:{label:"料仓编号"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["warehouseDetailName"],expression:"['warehouseDetailName']"}],attrs:{readOnly:""}})],1),e._v(" "),t("a-form-item",e._b({attrs:{label:"原材料名称"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rawmaterialName"],expression:"['rawmaterialName']"}],attrs:{readOnly:""}})],1),e._v(" "),t("a-form-item",e._b({attrs:{label:"原材料编号"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rawmaterialNo"],expression:"['rawmaterialNo']"}],attrs:{readOnly:""}})],1),e._v(" "),t("a-form-item",e._b({attrs:{label:"重量"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rawmaterialWeight"],expression:"['rawmaterialWeight']"}]})],1),e._v(" "),t("a-form-item",e._b({attrs:{label:"预警值"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["warnWeight"],expression:"['warnWeight']"}]})],1),e._v(" "),t("a-form-item",e._b({attrs:{label:"数量"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["quantity"],expression:"['quantity']"}]})],1)],1),e._v(" "),t("row-select",{attrs:{currentWarehouseDetail:e.warehouseDetailId},on:{send:e.sendSelectedId}}),e._v(" "),t("div",{staticClass:"drawer-bootom-button"},[t("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.onClose}},[t("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),e._v(" "),t("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},staticRenderFns:[]},h=t("VU/8")(d,c,!1,null,null,null);a.default=h.exports},T80H:function(e,a){},xiDn:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Dd8w"),i=t.n(r),o=t("qnD3"),n=t("NYxO"),s={name:"WarehousedetailInfo",components:{CreateCode:o.default},data:function(){return{content:{},contentName:""}},props:{warehouseDetailInfoVisiable:{require:!0,default:!1},warehouseDetailInfoData:{require:!0}},computed:i()({},Object(n.c)({user:function(e){return e.account.user}}),{show:{get:function(){return this.content=this.warehouseDetailInfoData,this.contentName=this.warehouseDetailInfoData.warehouseDetailName,this.warehouseDetailInfoVisiable},set:function(){}}}),methods:{handleCancleClick:function(){this.$emit("close")},printer:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.warehouseDetailInfoData.operator=this.user.username,a=this.warehouseDetailInfoData,this.$get("barcodeWarehouse/print",i()({},a)).then(function(a){e.$message.success("请求打印成功")})}}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{centered:!0,keyboard:!1,footer:null,width:750,title:"料仓详细信息"},on:{cancel:e.handleCancleClick},model:{value:e.show,callback:function(a){e.show=a},expression:"show"}},[t("a-layout",{staticClass:"rawmaterial-info"},[t("a-layout-sider",{staticClass:"rawmaterial-info-side"},[t("create-code",{attrs:{content:e.content,contentName:e.contentName}})],1),e._v(" "),t("a-layout-content",{staticClass:"rawmaterial-content-one"},[t("p",[t("a-icon",{attrs:{type:"user"}}),e._v("料仓名称："+e._s(e.warehouseDetailInfoData.warehouseDetailName))],1),e._v(" "),t("p",[t("a-icon",{attrs:{type:"skin"}}),e._v("原材料名称："+e._s(e.warehouseDetailInfoData.rawmaterialName))],1),e._v(" "),t("p",[t("a-icon",{attrs:{type:"skin"}}),e._v("原材料编号："+e._s(e.warehouseDetailInfoData.rawmaterialNo))],1)]),e._v(" "),t("a-layout-content",{staticClass:"user-content-two"},[t("p",["1"===e.warehouseDetailInfoData.status?t("a-icon",{attrs:{type:"smile"}}):t("a-icon",{attrs:{type:"frown"}}),e._v("状态：\n       "),"0"===e.warehouseDetailInfoData.status?[t("a-tag",{attrs:{color:"red"}},[e._v("锁定")])]:"1"===e.warehouseDetailInfoData.status?[t("a-tag",{attrs:{color:"cyan"}},[e._v("有效")])]:[e._v("\n         "+e._s(e.warehouseDetailInfoData.status)+"\n       ")]],2),e._v(" "),t("p",[t("a-icon",{attrs:{type:"clock-circle"}}),e._v("物料重量："+e._s(e.warehouseDetailInfoData.rawmaterialWeight))],1),e._v(" "),t("p",[t("a-icon",{attrs:{type:"login"}}),e._v("预警值："+e._s(e.warehouseDetailInfoData.warnWeight))],1)])],1),e._v(" "),t("a-button",{attrs:{type:"primary"},on:{click:e.printer}},[e._v("打印条码")])],1)},staticRenderFns:[]},u=t("VU/8")(s,l,!1,function(e){t("4wF+")},"data-v-554fee60",null);a.default=u.exports}});